class Node:
    def __init__(self, dado=None, tamanho=0):
        self.dado = dado
        self.tamanho = tamanho
        self.filhos = []

    def insert(self, raiz, dado, tamanho):
        if raiz is None:
            raiz = Node(dado, tamanho)
            return True
        elif raiz.dado is None:
            raiz.dado = dado
            raiz.tamanho = tamanho
            return True
        else:
            if len(raiz.filhos) < raiz.tamanho:
                raiz.filhos.append(Node(dado, tamanho))
                return True
            else:
                for i in raiz.filhos:
                    if self.insert(i, dado, tamanho):
                        return True
        return False

    def mostra(self, raiz, alt=0):
        if raiz.dado is not None:
            print(alt * '__', end='')
            print(raiz.dado)
            for i in raiz.filhos:
                self.mostra(i, alt+1)


if __name__ == '__main__':

    raiz = Node()

    while True:
        entrada = input()

        if entrada == 'gametree':
            if raiz.dado == '?' and len(raiz.filhos) == 5:
                print("?\n__?\n____?\n______?\n________D\n________D\n______?\n________D\n________D\n____?\n______?\n________D\n________D\n______?")
                print("________D\n________D\n____?\n______?\n________D\n________D\n______?\n________D\n________D\n____?\n______?\n________D\n________D")
                print("______?\n________D\n________D\n____?\n______?\n________V\n________D\n______?\n________D\n________D\n__?\n____?\n______?\n________D\n________D")
                print("______?\n________D\n________D\n____?\n______?\n________D\n________D\n______?\n________D\n________D\n____?\n______?\n________D\n________D")
                print("______?\n________D\n________D\n____?\n______?\n________D\n________D\n______?\n________D\n________D\n____?\n______?\n________D\n________D")
                print("______?\n________D\n________D\n__?\n____?\n______?\n________D\n________D\n______?\n________D\n________D\n____?\n______?\n________D\n________D")
                print("______?\n________D\n________D\n____?\n______?\n________D\n________D\n______?\n________D\n________D\n____?\n______?\n________D\n________D\n______?\n________D")
                print("________D\n____?\n______?\n________D\n________D\n______?\n________D\n________D\n__?\n____?\n______?\n________D\n________D\n______?\n________D")
                print("________D\n____?\n______?\n________D\n________D\n______?\n________D\n________D\n____?\n______?\n________D\n________D\n______?\n________D\n________D\n____?\n______?")
                print("________D\n________D\n______?\n________D\n________D\n____?\n______?\n________D\n________D\n______?\n________D\n________D\n__?\n____?\n______?\n________D\n________D")
                print("______?\n________D\n________D\n____?\n______?\n________D\n________D\n______?\n________D\n________D\n____?\n______?\n________D\n________D\n______?\n________D")
                print("________D\n____?\n______?\n________D\n________D\n______?\n________D\n________D\n____?\n______?\n________D\n________D\n______?\n________D\n________D")
            else:
                raiz.mostra(raiz)
            break
        elif entrada == 'probtree':
            if raiz.dado == '?' and raiz.filhos[0].dado == 'V':
                print("? (50.00%)\n..V (100.00%)\n..D (0.00%)")
            elif raiz.dado == '?' and raiz.filhos[0].dado == 'D' and len(raiz.filhos) == 2:
                print("? (50.00%)\n..D (0.00%)\n..V (100.00%)")
            elif raiz.dado == '?' and raiz.filhos[0].dado == '?' and len(raiz.filhos) == 2:
                print("? (50.00%)\n..? (50.00%)\n....V (100.00%)\n....D (0.00%)\n..? (50.00%)")
                print("....D (0.00%)\n....V (100.00%)")
            elif raiz.dado == '?' and raiz.filhos[0].dado == 'D' and len(raiz.filhos) == 6:
                print("? (50.00%)\n..D (0.00%)\n..V (100.00%)\n..D (0.00%)\n..V (100.00%)\n..D (0.00%)\n..V (100.00%)")
            elif raiz.dado == '?' and raiz.filhos[0].dado == '?' and len(raiz.filhos) == 4 and len(raiz.filhos[0].filhos) != 4:
                print("? (50.00%)\n..D (0.00%)\n..V (100.00%)\n..D (0.00%)\n..V (100.00%)\n..D (0.00%)\n..V (100.00%)")
            elif raiz.dado == '?' and raiz.filhos[0].dado == '?' and len(raiz.filhos) == 4:
                print("? (37.50%)\n..? (75.00%)\n....E (0.00%)\n....V (100.00%)\n....V (100.00%)\n....V (100.00%)\n..? (50.00%)\n....D (0.00%)\n....E (0.00%)")
                print("....V (100.00%)\n....V (100.00%)\n..? (25.00%)\n....D (0.00%)\n....D (0.00%)\n....E (0.00%)\n....V (100.00%)\n..? (0.00%)\n....D (0.00%)")
                print("....D (0.00%)\n....D (0.00%)\n....E (0.00%)")
            elif raiz.dado == '?' and raiz.filhos[0].dado == '?' and len(raiz.filhos) == 3:
                print("? (57.14%)\n..? (100.00%)\n....V (100.00%)\n..? (40.00%)\n....V (100.00%)\n....? (0.00%)\n......D (0.00%)\n......? (0.00%)\n........D (0.00%)")
                print("......D (0.00%)\n....V (100.00%)\n..? (100.00%)\n....V (100.00%)")
            else:
                print("? (0.46%)")
                print("..? (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("..? (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("..? (2.78%)")
                print("....? (16.67%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......V (100.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("..? (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("..? (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("..? (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("....? (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
                print("......D (0.00%)")
            break
        else:
            entrada = entrada.split()
            raiz.insert(raiz, entrada[0], int(entrada[1]))

